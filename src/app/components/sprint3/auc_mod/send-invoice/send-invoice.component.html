<div class="col-12 mt-1">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb px-0">
            <li class="breadcrumb-item" style="font-size: 14px;"><a href="#">{{'auctionCommittee.ac-detail.bcrumb1' |
                    translate}}</a></li>
            <li class="breadcrumb-item" style="font-size: 14px;"><a href="#">{{'auctionCommittee.ac-detail.bcrumb2' |
                    translate}}</a></li>
            <li class="breadcrumb-item" style="font-size: 14px;"><a href="#">{{'auctionCommittee.ac-detail.bcrumb3' |
                    translate}}</a></li>
            <li class="breadcrumb-item active" aria-current="page" style="font-size: 14px;">
                {{'bidderAuctions.payment_bill' | translate}}</li>
        </ol>
    </nav>
</div>

<br>

<div class="col-12">
    <h2 style="font-weight: bold; color: #08594D; font-size: 32px">{{'bidderAuctions.payment_bill' | translate}}</h2>
</div>
<hr>
<br>

<div style="padding-left: 10%;">
    <p style="color: #32AD71; font-size: 24px; font-weight: bold;">{{'bidderFinalInvoice.InvoiceInformation' |
        translate}}</p>
    <div style="border: #cac1c1 1px solid; border-radius: 5px; width: 896px;">

        <div style="width: 801px; margin: 5%;">
            <p style="color: #005B4D; font-size: 18px; font-weight: bold;">{{'bidderFinalInvoice.AuctionData' |
                translate}}</p>
            <br>
            <div style="display: flex;">
                <div style="width: 35%;">
                    <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.AuctionReferenceNumber' |
                        translate}}</p>
                    <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.auctionReferenceNo}}</p>
                </div>
                <div style="width: 35%;">
                    <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.AuctionStartDateandTime' |
                        translate}}</p>
                    <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.auctionDate}}&nbsp;&nbsp;<span
                            style="font-size: 6px; color: #32AD71;"
                            class="icon-fiber_manual_record"></span>&nbsp;&nbsp;<span
                            style="color: #cac1c1;">{{invoiceForSend.auctionTime}}</span></p>
                </div>
                <div style="width: 30%;">
                    <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.ProductsType' | translate}}</p>
                    <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.productsType}}</p>
                </div>
            </div>
            <br>
            <div style="display: flex;">
                <div style="width: 35%;">
                    <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.OfferAwardDate' | translate}}</p>
                    <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.offerAwardDate}}&nbsp;&nbsp;<span
                            style="font-size: 6px; color: #32AD71;"
                            class="icon-fiber_manual_record"></span>&nbsp;&nbsp;<span
                            style="color: #cac1c1;">{{invoiceForSend.offerAwardTime}}</span></p>
                </div>
            </div>
            <hr>
            <br>

            <div style="display: flex;">

                <div style="width: 50%;">
                    <p style="color: #005B4D; font-size: 18px; font-weight: bold;">
                        {{'bidderFinalInvoice.BillHolderInformation' | translate}}</p>
                    <br>
                    <div>
                        <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.FacilityName' | translate}}
                        </p>
                        <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.facilityName}}</p>
                    </div>
                    <br>
                    <div>
                        <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.CommercialRegistrationNo' |
                            translate}}</p>
                        <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.commercialRegNo}}</p>
                    </div>
                </div>

                <div style="width: 50%;">
                    <p style="color: #005B4D; font-size: 18px; font-weight: bold;">{{'bidderFinalInvoice.BillerData' |
                        translate}}</p>
                    <br>
                    <div>
                        <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.EntityName' | translate}}</p>
                        <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.entityName}}</p>
                    </div>
                    <br>
                    <div>
                        <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.EntityNo' | translate}}</p>
                        <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.entityNo}}</p>
                    </div>
                </div>

            </div>
            <hr>

            <br>

            <p style="color: #005B4D; font-size: 18px; font-weight: bold;">{{'bidderFinalInvoice.DeliveryData' |
                translate}}</p>
            <br>
            <div>
                <div style="width: 40%;">
                    <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.DeliveryDate' | translate}}</p>
                    <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.deliveryDate}}</p>
                </div>
            </div>
            <br>
            <div style="display: flex;">
                <div style="width: 40%;">
                    <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.Region' | translate}}</p>
                    <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.region}}</p>
                </div>
                <div style="width: 35%;">
                    <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.City' | translate}}</p>
                    <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.city}}</p>
                </div>
                <div style="width: 25%;">
                    <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.District' | translate}}</p>
                    <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.district}}</p>
                </div>
            </div>
            <br>
            <div style="display: flex;">
                <div style="width: 40%;">
                    <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.Street' | translate}}</p>
                    <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.street}}</p>
                </div>
                <div style="width: 35%;">
                    <p style="color: #117ABE; font-size: 15px;">{{'bidderFinalInvoice.OtherNotes' | translate}}</p>
                    <p style="color: #005B4E; font-size: 17px;">{{invoiceForSend.otherNotes}}</p>
                </div>
            </div>
            <hr>
            <br>

            <p style="color: #005B4D; font-size: 18px; font-weight: bold;">
                {{'bidderFinalInvoice.TableOfProductsAndPrices' | translate}}</p>

            <table id="inventoryAllocationTable" class="table table-bordered table-expanded">
                <thead class="thead-dark">
                    <tr>
                        <th style="width: 12%;" class="btn-primary-light" scope="col"
                            (click)="sortByTableHeaderId(1, 'string')">
                            <div style=" padding-left: 10px;" class="table-header-cell">
                                <span>#</span>
                                <span class="arrow asc"><span class="icon-unfold_more"></span></span>
                            </div>
                        </th>
                        <th class="btn-primary-light" scope="col" (click)="sortByTableHeaderId(2, 'string')">
                            <div style=" padding-left: 10px;" class="table-header-cell">
                                <span>{{'bidderFinalInvoice.ProductName' | translate}}</span>
                                <span class="arrow asc"><span class="icon-unfold_more"></span></span>
                            </div>
                        </th>
                        <th class="btn-primary-light" scope="col" (click)="sortByTableHeaderId(3, 'string')">
                            <div style=" padding-left: 10px;" class="table-header-cell">
                                <span>{{'bidderFinalInvoice.SKU_Number' | translate}}</span>
                                <span class="arrow asc"><span class="icon-unfold_more"></span></span>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <ng-container *ngIf="invoiceForSend.productDetails">
                        <ng-container *ngIf="invoiceForSend.productDetails.length > 0">
                            <tr *ngFor="let rowItem of invoiceForSend.productDetails;index as i">
                                <td>{{rowItem.referenceno}}</td>
                                <td>{{rowItem.productname}}</td>
                                <td>{{rowItem.SKUNumber}}</td>
                            </tr>

                        </ng-container>
                    </ng-container>
                    <ng-container *ngIf="invoiceForSend.productGrandTotal">
                        <tr>
                            <td colspan="3" style="color: #005B4D; font-weight: bold;">
                                {{'bidderFinalInvoice.GearPrice' | translate}} <span
                                    style="color: #32AD71; margin-left: 78%;">{{invoiceForSend.productGrandTotal.gearPrice}}</span>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="color: #005B4D; font-weight: bold;">
                                {{'bidderFinalInvoice.QuestRate' | translate}} <span
                                    style="color: #32AD71; margin-left: 74%;">{{invoiceForSend.productGrandTotal.questRate}}</span>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="color: #005B4D; font-weight: bold;">
                                {{'bidderFinalInvoice.ValueAddedTax' | translate}} <span
                                    style="color: #32AD71; margin-left: 74%;">{{invoiceForSend.productGrandTotal.valueAddTax}}</span>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="color: #005B4D; font-weight: bold;">
                                {{'bidderFinalInvoice.TotalInvoicePrice' | translate}} <span
                                    style="color: #32AD71; margin-left: 72%;">{{invoiceForSend.productGrandTotal.totalInvPrice}}</span>
                            </td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>

            <ng-container *ngIf="invoiceForSend.productDetails">
                <div class="mt-4 row margin-auto" *ngIf="invoiceForSend.productDetails.length > 0">
                    <div class="mb-5">
                        <nav aria-label="..." class="nav-pagination">

                            <ul *ngIf="PaginationServc.pages && PaginationServc.pages.length > 0" class="pagination">
                                <!-- <li class="page-item" [ngClass]="{ disabled: PaginationServc.currentPage === 1 }">
                                <a (click)="getServerData(1)" class="page-link" href="#">Last</a>
                            </li> -->
                                <li class="page-item" [ngClass]="{ disabled: PaginationServc.currentPage === 1 }">
                                    <a (click)="getServerData(PaginationServc.currentPage)" class="page-link"
                                        tabindex="-1" aria-disabled="true">{{ 'auctionlist.grid-previous' | translate
                                        }}</a>
                                </li>
                                <li *ngFor="let page of PaginationServc.pages" class="page-item"
                                    [ngClass]="{ active: PaginationServc.currentPage === page }">
                                    <a (click)="getServerData(page + 1)" class="page-link">
                                        {{ page }}
                                    </a>
                                </li>
                                <li class="page-item"
                                    [ngClass]="{ disabled: PaginationServc.currentPage === PaginationServc.totalPages }">
                                    <a (click)="getServerData(PaginationServc.currentPage + 2)" class="page-link">{{
                                        'auctionlist.grid-next' | translate }}</a>
                                </li>
                                <!-- <li class="page-item" [ngClass]="{ disabled: PaginationServc.currentPage === PaginationServc.totalPages }">
                                <a (click)="getServerData(PaginationServc.currentPage + 1)" class="page-link" href="#">Last</a>
                            </li> -->
                            </ul>
                        </nav>
                    </div>
                </div>
            </ng-container>

        </div>

    </div>
    <br>

    <!-- Added by Mohammed Salick -->
    <div *ngIf="userRole != 'EAuction_AuctionManager'" style="display: flex; justify-content: space-between;">
        <button type="button"
            style="outline: none; color: grey; background-color: white; height: 50px; width: 130px; border: 1px solid grey; border-radius: 5px; font-size: 18px;"
            class="btn arrow-btn arrow-btn-reverse btn-outline-light btn-lg btn-block">
            <span class="btn-text">{{'bidderSendInvoice.reference' | translate}}</span> <span class="v-divider"></span>
            <span class="icon icon-arrow-left"></span>
        </button>
        <button data-dismiss="modal" aria-label="Close" data-toggle="modal" data-target="#showSuccessfulModal"
            style="outline: none; background-color: #32AD71; color: white; font-weight: bold; height: 50px; width: 140px; border: none; border-radius: 5px;">
            {{'bidderSendInvoice.send_invoice' | translate}}
        </button>
    </div>
</div>




<!-- Approval of the final award and send the invoice -->

<div style="width: 600px; margin-left: 400px;" class="modal fade" id="showSuccessfulModal" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" aria-hidden="true">

    <div class="modal-dialog modal-lg" role="document">

        <div class="modal-content" style="width: 100%; height: 100%;">

            <div class="" style="display: flex; margin-top: 10px;">
                <div style="width: 400px; text-align: left;">
                    <p
                        style="font-family:DIN Next LT Arabic Regular; color: #32AD71; font-size: 22px; line-height: 26px; font-weight: bold;">
                        {{'bidderSendInvoice.approval_of_the_final_award_title' | translate}}</p>
                </div>

                <div>
                    <button type="button" class="modal-close btn-close btn-sm" data-dismiss="modal" aria-label="Close">
                        <span class="icon-close"></span>
                    </button>
                </div>
            </div>

            <div class="modal-body" style="width: 470px; margin-top: 10px; text-align: left;">
                <p style="font-family:DIN Next LT Arabic Regular; font-size: 20px; color: #414042; line-height: 24px;">
                    {{'bidderSendInvoice.approval_of_the_final_award_desc' | translate}}
                </p>
            </div>


            <div style="margin-left: 220px;" style="display: flex;justify-content: end;">
                <button class="mr-2 ml-2"
                    style="height:45px; width: 90px; border: 1px grey solid; outline: none; background-color: white; color: grey; border-radius: 5px;">{{'bidderSendInvoice.reference'
                    | translate}}</button>

                <button type="button" class="btn btn-primary-light-green btn-md" data-dismiss="modal" aria-label="Close"
                    data-toggle="modal" data-target="#secondPopup"
                    style="height:45px; width: 120px; background-color: #32AD71; color: white; font-weight: bold; outline: none; border: none; border-radius: 4px;">
                    {{'bidderSendInvoice.send_invoice' | translate}}</button>
            </div>
        </div>
    </div>
</div>

<!-- Approval of the final award and send the invoice -->

<div style="width: 600px; margin-left: 400px;" class="modal" id="secondPopup" tabindex="-2" role="dialog"
    aria-labelledby="exampleModalLabel" aria-hidden="true">

    <div class="modal-dialog modal-lg modal-dialog-centered">

        <div class="card shadow-lg result result-success" style="align-items: center;">
            <button type="button" class="modal-close btn-close btn-sm" data-dismiss="modal" aria-label="Close">
                <span class="icon-close"></span>
            </button>
            <div class="alert-body">
                <i class="alert-icon">
                    <span class="icon-alert-success"></span>
                </i>
                <div class="alert-content">
                    <h4>{{'bidderSendInvoice.invoice_sent_successfully' | translate}}</h4>
                    <p style="color: #414042;">
                        {{'bidderSendInvoice.you_will_receive_invoice' | translate}}
                    </p>
                </div>
            </div>
            <div class="alert-action">
                <button type="button" class="btn btn-primary-light"> {{'bidderSendOffer.BackToAuctions' |
                    translate}}</button>
            </div>
        </div>
    </div>
</div>

<br><br><br><br>